
<!DOCTYPE html>
<!-- Created By CodingLab - www.codinglabweb.com -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
   <title>Зилзала Детектору</title>
   <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
    <!-- Leaflet карты -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

  </head>
  <body id="body">
    <nav>
      <div class="logo"><img src="img/techordo_logo.png" alt="" ><p style="margin-top: -45px; margin-left: 58px;">Tech<b style="color: #797451;">Ordo</b></p></div>
      <input type="checkbox" id="click">
      <label for="click" class="menu-btn">
        <i class="fas fa-bars"></i>
      </label>
      <ul>
        <li><a class="active" href="#"data-lang="menu_home">Башкы Бет</a></li>
        <li><a href="#" data-lang="menu_about">Биз Жөнүндө</a></li>
        <li><a href="https://erdbebenmonitor.netlify.app/" data-lang="menu_detector">Зилзала </a></li>
        <li><a href="#" onclick="setLanguage('KG')">КР</a></li>
        <li><a href="#" onclick="setLanguage('RU')">РУ</a></li>
        <li><a href="#" onclick="setLanguage('EN')">EN</a></li>
      </ul>
    </nav>
    <div class="content" id="content">
      <div class="main" id="main">
        <h1 data-lang="main_title" style=" text-align: start; font-size: 40px; font-weight: 200;">Зилзала Детектору <b style=" color: #797451; font-weight: 700;">Кыргызстанда</b></h1>
      <p data-lang="main_desc"><b>Зилзаланын</b> кыйратуучу  күчүнөн алгачкылардан болуп маалымат алгың келсе, бизге каттал!</p>
      <a href="#form" data-lang="btn_register"> Катталуу</a>
      </div>    
    <div class="map">
        <h1 style="padding-left: 20px;" data-lang="map_title">Сейсмостанциялар</h1>
  <p style="padding-left: 20px;" data-lang="map_desc">Төмөндө активдүү сейсмографтар көрсөтүлгөн</p>

  <div id="map"></div>
  </div>
  <div class="form_container" id="form">
    <form id="registerForm">
                    <div class="zaga">
                        <div class="logomass">
                            <img src="img/techordo_logo.png" alt="logo" class="tab_logo_1">
                        </div>
                        <div class="zagamass">
                            <h3 data-lang="form_title">Бизге Катталыңыз!</h3>
                        </div>
                    </div>
                    <label for=""><i class="fas fa-user" data-lang="label_name"></i></label>
                    <input type="text" id="name" name="Аты" placeholder=" Мисалы, Айбек/Айгул">
                    <label for=""><i class="fas fa-envelope" data-lang="label_email"></i></label>
                    <input type="email" id="email" name="Email почтасы" placeholder="site123@gmail.com">
                    <label for=""><i class="fas fa-phone-alt" data-lang="label_phone"></i></label>
                    <input type="number" id="phone" name="Телефон номери" placeholder="+996 999 999 999">
                    <label for=""><i class="fas fa-map-marker-alt" data-lang="label_region"></i></label>
                    <select  id="region" name="област" >
                        <option data-lang="region_naryn">Нарын</option>
                        <option data-lang="region_bishkek">Бишкек</option>
                        <option data-lang="region_chuy">Чуй</option>
                        <option data-lang="region_ysyk">Ыссык-Кол</option>
                        <option data-lang="region_talas">Талас</option>
                        <option data-lang="region_jalal">Жалал-Абад</option>
                        <option data-lang="region_osh">Ош</option>
                        <option data-lang="region_batken">Баткен</option>
                    </select>
                    <button type="submit" data-lang="btn_submit"><i class="fas fa-share"> Катталуу</i></button>
                </form>
  </div>
    </div>
<script>
        const translations = {
            KG: {
                menu_home: "Башкы Бет", menu_about: "Биз Жөнүндө", menu_detector: "Зилзала",
                main_title: "Зилзала Детектору Кыргызстанда",
                main_desc: "Зилзаланын кыйратуучу күчүнөн алгачкылардан болуп маалымат алгың келсе, бизге каттал!",
                btn_register: "Катталуу", map_title: "Сейсмостанциялар", map_desc: "Төмөндө активдүү сейсмографтар көрсөтүлгөн",
                form_title: "Бизге Катталыңыз!", label_name: " Аты-жөнү:", label_email: " E-mail почтасы:",
                label_phone: " Байланыш номери:", label_region: " Сиз жашаган аймак:", btn_submit: "Катталуу",
                region_naryn: "Нарын", region_bishkek: "Бишкек", region_chuy: "Чүй", region_ysyk: "Ысык-Кол",
                region_talas: "Талас", region_jalal: "Жалал-Абад", region_osh: "Ош", region_batken: "Баткен"
            },

            RU: {
                menu_home: "Главная", menu_about: "О нас", menu_detector: "Землетрясения",
                main_title: "Детектор землетрясений в Кыргызстане",
                main_desc: "Хотите быть первыми, кто узнает о землетрясении? Зарегистрируйтесь!",
                btn_register: "Регистрация", map_title: "Сейсмостанции", map_desc: "Ниже активные сейсмографы",
                form_title: "Зарегистрируйтесь!", label_name: " Имя:", label_email: " E-mail:", label_phone: " Телефон:",
                label_region: " Ваш регион:", btn_submit: "Отправить",
                region_naryn: "Нарын", region_bishkek: "Бишкек", region_chuy: "Чуйская обл.", region_ysyk: "Иссык-Кульская",
                region_talas: "Таласская", region_jalal: "Джалал-Абадская", region_osh: "Ошская", region_batken: "Баткенская"
            },

            EN: {
                menu_home: "Home", menu_about: "About Us", menu_detector: "Earthquake",
                main_title: "Earthquake Detector in Kyrgyzstan",
                main_desc: "Be among the first to receive earthquake alerts — register!",
                btn_register: "Register", map_title: "Seismic Stations", map_desc: "Active seismographs below",
                form_title: "Register with us!", label_name: " Name:", label_email: " E-mail:", label_phone: " Phone:",
                label_region: " Your region:", btn_submit: "Submit",
                region_naryn: "Naryn", region_bishkek: "Bishkek", region_chuy: "Chuy", region_ysyk: "Issyk-Kul",
                region_talas: "Talas", region_jalal: "Jalal-Abad", region_osh: "Osh", region_batken: "Batken"
            }
        };

        function setLanguage(lang) {
            document.querySelectorAll("[data-lang]").forEach(el => {
                const key = el.getAttribute("data-lang");
                if (translations[lang][key]) el.textContent = translations[lang][key];
            });
            localStorage.setItem("language", lang);
        }

        document.addEventListener("DOMContentLoaded", () => {
            const lang = localStorage.getItem("language") || "KG";
            setLanguage(lang);
        });
    </script>
<script src="three.min.js"></script>
<script src="vanta.waves.min.js"></script>
<script>
    VANTA.WAVES({
  el: "#main",
  mouseControls: true,
  touchControls: true,
  gyroControls: false,
  minHeight: 200.00,
  minWidth: 200.00,
  scale: 1.00,
  scaleMobile: 1.00,
  color: 0xd0d0d,
  shininess: 49.00,
  waveHeight: 16.00,
  waveSpeed: 0.40,
  zoom: 0.76
})


</script>
<script>
    VANTA.WAVES({
  el: "#form",
  mouseControls: true,
  touchControls: true,
  gyroControls: false,
  minHeight: 200.00,
  minWidth: 200.00,
  scale: 1.00,
  scaleMobile: 1.00,
  color: 0xd0d0d,
  shininess: 49.00,
  waveHeight: 16.00,
  waveSpeed: 0.40,
  zoom: 0.76
})


</script>
<script>
    // Инициализация карты без атрибуции
    var map = L.map('map', {
      attributionControl: false
    }).setView([42.8746, 74.5698], 6); // Бишкек

    // Светлая стандартная карта
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19
    }).addTo(map);

    // Список сейсмографов
    var sensors = [
      { name: "Сейсмограф 1", lat: 42.8746, lng: 74.5698, mag: 3.4 },
      { name: "Сейсмограф 2", lat: 40.515, lng: 72.8, mag: 4.1 },
      { name: "Сейсмограф 2", lat: 42.826702, lng: 74.6645419, mag: 4.1 }

    ];

    // Добавляем маркеры
    sensors.forEach(function(s) {
      L.marker([s.lat, s.lng]).addTo(map)
        .bindPopup(`${s.name}<br>Магнитуда: ${s.mag}`);
    });


    //form
    
  </script>

<script>
document.getElementById('registerForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const region = document.getElementById('region').value;

  if (!name || !email) {
    alert('Введите имя и email');
    return;
  }

  try {
    const resp = await fetch('https://earth-quake-eavc.onrender.com/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, email, phone, region })
    });

    const data = await resp.json();
    if (resp.ok && data.success) {
      alert('Вы успешно зарегистрированы!');
      // очистить форму
      document.getElementById('registerForm').reset();
    } else {
      alert('Ошибка регистрации: ' + (data.error || 'unknown'));
    }
  } catch (err) {
    console.error('Fetch error', err);
    alert('Ошибка связи с сервером: ' + err.message);
  }
});
</script>

  </body>
</html>
